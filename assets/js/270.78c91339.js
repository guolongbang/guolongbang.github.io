(window.webpackJsonp=window.webpackJsonp||[]).push([[270],{597:function(t,s,a){"use strict";a.r(s);var n=a(7),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"顶点着色器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#顶点着色器"}},[t._v("#")]),t._v(" 顶点着色器")]),t._v(" "),s("p",[t._v("你把"),s("strong",[t._v("渲染管线")]),t._v("想象为工厂的一条"),s("strong",[t._v("流水线")]),t._v("，"),s("strong",[t._v("顶点着色器")]),t._v("想象为流水线上一个的"),s("strong",[t._v("工位")]),t._v("。")]),t._v(" "),s("p",[s("img",{attrs:{src:"/imgwegpu/%E6%B8%B2%E6%9F%93%E7%AE%A1%E7%BA%BF%E6%9C%80%E7%AE%80%E5%8D%95%E7%9A%84%E5%9B%BE%E6%A1%88.png",alt:""}})]),t._v(" "),s("p",[t._v("GPU渲染管线上提供的"),s("strong",[t._v("顶点着色器单元")]),t._v("的功能就是"),s("strong",[t._v("计算顶点")]),t._v("，所谓计算顶点，简单点说，就是对顶点坐标x、y、z的值进行平移、旋转、缩放等等各种操作。")]),t._v(" "),s("p",[s("img",{attrs:{src:"/imgwegpu/%E9%A1%B6%E7%82%B9%E7%9D%80%E8%89%B2%E5%99%A8%E5%8A%9F%E8%83%BD.png",alt:""}})]),t._v(" "),s("h3",{attrs:{id:"顶点着色器代码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#顶点着色器代码"}},[t._v("#")]),t._v(" 顶点着色器代码")]),t._v(" "),s("p",[t._v("GPU渲染管线上的顶点着色器功能单元，可以执行WGSL着色器语言编写的代码。")]),t._v(" "),s("p",[t._v("所有顶点数据经过顶点着色器这个工位时候，都会执行顶点着色器代码中顶点计算的函数，比如平移顶点坐标，比如放大顶点坐标，具体怎么改变顶点数据，看你怎么写的顶点着色器代码。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("@vertex\nfn "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("@"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("location")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" pos"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" vec3"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("f32"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" @"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("builtin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("position"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" vec4"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("f32"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" pos2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" vec4"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("f32"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pos"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//pos转齐次坐标")]),t._v("\n    pos2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("x "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//偏移所有顶点的x坐标")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" pos2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"wgsl着色器代码形式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#wgsl着色器代码形式"}},[t._v("#")]),t._v(" WGSL着色器代码形式")]),t._v(" "),s("p",[t._v("在JavaScript或Typescript写的WebGPU代码时候，按照语法要求，WGSL着色器的代码，要以字符串的形式存在。")]),t._v(" "),s("p",[t._v("如果你直接在"),s("strong",[t._v("单引号")]),t._v("或"),s("strong",[t._v("双引号")]),t._v("表示的字符串里面写WGSL代码，实现字符串的多行书写，需要用+号码连接，不是很方便的。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" str "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@vetex'")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fn main(@location(0) pos: vec3<f32>) -> @builtin(position) vec4<f32> {'")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'    return vec4<f32>(pos,1.0);'")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'}'")]),t._v("\n")])])]),s("p",[t._v("使用ES6的语法模板字符串"),s("code",[t._v("``")]),t._v("(反引号)，实现字符串的多行书写很方便。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 顶点着色器代码")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" vertex "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\n@vertex\nfn main(@location(0) pos: vec3<f32>) -> @builtin(position) vec4<f32> {\n    return vec4<f32>(pos,1.0);\n}\n")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n")])])]),s("h3",{attrs:{id:"反引号里面写顶点着色器代码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#反引号里面写顶点着色器代码"}},[t._v("#")]),t._v(" 反引号里面写顶点着色器代码")]),t._v(" "),s("p",[t._v("Tab键上面的一个按键输入反引号,实现JavaScript模板字符串"),s("code",[t._v("``")]),t._v("语法")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" vertex "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("以字符串形式写WGSL代码")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n")])])]),s("h3",{attrs:{id:"vertex"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vertex"}},[t._v("#")]),t._v(" "),s("code",[t._v("@vertex")])]),t._v(" "),s("p",[s("code",[t._v("@vertex")]),t._v("表示字符串vertex里面的代码是顶点着色器代码，在GPU渲染管线的顶点着色器单元上执行。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" vertex "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\n@vertex\n")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n")])])]),s("p",[t._v("为了方便单独管理WGSL着色器代码，你可以创建一个"),s("code",[t._v("shader.js")]),t._v("文件，在里面写着色器代码。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" vertex "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\n@vertex\n")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" vertex "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"fn关键字声明一个函数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#fn关键字声明一个函数"}},[t._v("#")]),t._v(" "),s("code",[t._v("fn")]),t._v("关键字声明一个函数")]),t._v(" "),s("p",[s("code",[t._v("fn")]),t._v("关键字声明一个函数，命名为main，作为顶点着色器代码的入口函数。"),s("code",[t._v("fn")]),t._v("关键字类似JavaScript语言的"),s("code",[t._v("function")]),t._v("关键字，用来声明一个函数")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("@vertex\nfn "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"vscode插件-可视化wgsl语法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vscode插件-可视化wgsl语法"}},[t._v("#")]),t._v(" vscode插件 可视化WGSL语法")]),t._v(" "),s("p",[t._v("搜索关键词WGSL，安装插件WGSL和WGSL Literal。")]),t._v(" "),s("p",[t._v("着色器代码之前设置"),s("code",[t._v("/* wgsl */")]),t._v("，可以使用不同颜色来显示WGSL不能的部分，更方便预览学习。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 顶点着色器代码")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" vertex "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* wgsl */")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\n@vertex\nfn main(@location(0) pos: vec3<f32>) -> @builtin(position) vec4<f32> {\n    return vec4<f32>(pos,1.0);\n}\n")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n")])])]),s("p",[s("img",{attrs:{src:"/imgwegpu/%E9%A1%B6%E7%82%B9%E7%9D%80%E8%89%B2%E5%99%A8%E4%BB%A3%E7%A0%81%E6%B2%A1%E6%9C%89%E5%BD%A9%E8%89%B2%E6%98%BE%E7%A4%BA.png",alt:""}})]),t._v(" "),s("h3",{attrs:{id:"location关键字"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#location关键字"}},[t._v("#")]),t._v(" "),s("code",[t._v("location")]),t._v("关键字")]),t._v(" "),s("p",[s("code",[t._v("location")]),t._v("是WGSL语言的一个关键字，通用用来指定顶点缓冲区相关的顶点数据，使用"),s("code",[t._v("location")]),t._v("的时候需要加上"),s("code",[t._v("@")]),t._v("符号前缀，"),s("code",[t._v("@location()")]),t._v("小括号里面设置参数。")]),t._v(" "),s("p",[t._v("main函数的参数"),s("code",[t._v("@location(0)")]),t._v("表示你GPU显存中标记为0的顶点缓冲区中顶点数据。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("@vertex\nfn "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("@"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("location")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("执行"),s("code",[t._v("@location(0) pos")]),t._v("给main函数参数"),s("code",[t._v("@location(0)")]),t._v("表示的顶点数据设置一个变量名pos。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("@vertex\nfn "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("@"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("location")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" pos")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"顶点变量的数据类型"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#顶点变量的数据类型"}},[t._v("#")]),t._v(" 顶点变量的数据类型")]),t._v(" "),s("p",[t._v("可以用三维向量"),s("code",[t._v("vec3")]),t._v("的三个分量表示顶点的x、y、z坐标。")]),t._v(" "),s("p",[t._v("执行"),s("code",[t._v("@location(0) pos: vec3<f32>")]),t._v("给main函数参数"),s("code",[t._v("pos")]),t._v("设置数据类型，"),s("code",[t._v("vec3")]),t._v("表示pos变量的数据类型是三维向量"),s("code",[t._v("vec3")]),t._v("，"),s("code",[t._v("<f32>")]),t._v("表示三维向量x、y、z四个属性的值都是32位浮点数。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("@vertex\nfn "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("@"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("location")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" pos"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" vec3"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("f32"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("注意@location(0)对应WebGPU传过来的顶点是三个为一组，所以顶点着色器代码中pos变量的数据类型，用三维向量表示，如果WebGPU中传过来的顶点数据，两个为一组，比如只有x和y坐标，没有z坐标，书写形式就是"),s("code",[t._v("@location(0) pos: vec2<f32>")]),t._v("。")]),t._v(" "),s("h3",{attrs:{id:"vec3顶点坐标转vec4齐次坐标"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vec3顶点坐标转vec4齐次坐标"}},[t._v("#")]),t._v(" vec3顶点坐标转vec4齐次坐标")]),t._v(" "),s("p",[t._v("在WGSL顶点着色器代码中，很多时候会用四维向量"),s("code",[t._v("vec4")]),t._v("表示顶点的位置坐标，"),s("code",[t._v("vec4")]),t._v("第四个分量默认值一般是1.0，"),s("code",[t._v("vec4")]),t._v("相比"),s("code",[t._v("vec3")]),t._v("多了一个分量，你可以把"),s("code",[t._v("vec4")]),t._v("形式的坐标称为齐次坐标，是WGSL内部一个常用语法形式格式。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("@vertex\nfn "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("@"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("location")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" pos"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" vec3"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("f32"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" pos2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" vec4"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("f32"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pos"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//pos转齐次坐标")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"顶点计算后-return返回顶点数据"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#顶点计算后-return返回顶点数据"}},[t._v("#")]),t._v(" 顶点计算后，"),s("code",[t._v("return")]),t._v("返回顶点数据")]),t._v(" "),s("p",[t._v("实际开发，一般会在main函数中，进行顶点计算，具体说就是，对顶点的坐标进行几何变换，比如平移、缩放、旋转等操作。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("@vertex\nfn "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("@"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("location")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" pos"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" vec3"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("f32"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" pos2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" vec4"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("f32"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pos"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    pos2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("x "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//偏移所有顶点的x坐标")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("渲染管线是一条流水线，顶点着色器处理好的顶点数据，最后需要通过关键字"),s("code",[t._v("return")]),t._v("返回，这样渲染管线的下个环节，就可以使用了。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("@vertex\nfn "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("@"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("location")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" pos"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" vec3"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("f32"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" pos2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" vec4"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("f32"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pos"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    pos2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("x "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" pos2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//返回顶点数据，渲染管线下个环节使用")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("如果你不需要在GPU顶点着色器中对顶点坐标进行变换，可以直接return返回即可")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("@vertex\nfn "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("@"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("location")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" pos"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" vec3"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("f32"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" vec4"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("f32"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pos"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//返回顶点数据，渲染管线下个环节使用")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"函数返回值数据类型"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#函数返回值数据类型"}},[t._v("#")]),t._v(" 函数返回值数据类型")]),t._v(" "),s("p",[t._v("main函数"),s("code",[t._v("return")]),t._v("返回的变量，需要通过"),s("code",[t._v("->")]),t._v("符号设置函数返回值的数类类型,"),s("code",[t._v("-> vec4<f32>")]),t._v("表示函数返回的变量是浮点数构成的四维向量"),s("code",[t._v("vec4")]),t._v("。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("@vertex\nfn "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("@"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("location")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" pos"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" vec43"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("f32"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" vec4"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("f32"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" vec4"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("f32"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pos"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//返回顶点数据，渲染管线下个环节使用")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"内置变量position和-builtin关键字"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#内置变量position和-builtin关键字"}},[t._v("#")]),t._v(" 内置变量"),s("code",[t._v("position")]),t._v("和"),s("code",[t._v("@builtin")]),t._v("关键字")]),t._v(" "),s("p",[s("code",[t._v("position")]),t._v("是WGSL语言的一个内置变量，所谓内置变量，就是说WGSL默认提供的变量，你不通过关键字"),s("code",[t._v("var")]),t._v("声明就可以使用。WGSL有很多内置变量，不同的内置变量有不同的含义，内置变量"),s("code",[t._v("position")]),t._v("表示顶点数据。")]),t._v(" "),s("p",[s("code",[t._v("builtin")]),t._v("是WGSL语言的一个关键字，使用"),s("code",[t._v("location")]),t._v("的时候需要加上"),s("code",[t._v("@")]),t._v("符号前缀，"),s("code",[t._v("@location()")]),t._v("小括号里面设置参数，参数一般是WGSL的某个内置变量，换句话就是当你使用内置变量的时候，一般需要通过"),s("code",[t._v("@location()")]),t._v("标记。")]),t._v(" "),s("p",[t._v("main函数的返回是顶点数据，这时候除了设置返回值数据类型，还需要设置"),s("code",[t._v("@builtin(position)")]),t._v(",表明返回值是顶点位置数据。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("@vertex\nfn "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("@"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("location")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" pos"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" vec3"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("f32"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" @"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("builtin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("position"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" vec4"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("f32"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" vec4"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("f32"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pos"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//返回顶点数据，渲染管线下个环节使用")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[s("img",{attrs:{src:"/imgwegpu/%E5%9B%BE%E5%85%83%E8%A3%85%E9%85%8D%E5%85%89%E6%A0%85%E5%8C%96.png",alt:""}})]),t._v(" "),s("h3",{attrs:{id:"本节课完成的一个最简单顶点着色器代码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#本节课完成的一个最简单顶点着色器代码"}},[t._v("#")]),t._v(" 本节课完成的一个最简单顶点着色器代码")]),t._v(" "),s("p",[t._v("后面课程讲解，会经常在此代码基础上增删代码，第一次学习，没有记住顶点着色器全部代码也没关系，初学者会在本代码基础增删代码即可。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" vertex "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\n@vertex\nfn main(@location(0) pos: vec3<f32>) -> @builtin(position) vec4<f32>{\n    return vec4<f32>(pos,1.0);\n}\n")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n")])])]),s("h3",{attrs:{id:"_7小节代码体验测试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7小节代码体验测试"}},[t._v("#")]),t._v(" 7小节代码体验测试")]),t._v(" "),s("p",[t._v("通过上面学习，你对顶点着色器代码的功能也有了一定了解，你可以在7小节完整代码基础上，改变顶点位置坐标，体验测试，这样印象更加深刻。")]),t._v(" "),s("h3",{attrs:{id:"着色器代码块方法-createshadermodule"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#着色器代码块方法-createshadermodule"}},[t._v("#")]),t._v(" 着色器代码块方法"),s("code",[t._v(".createShaderModule()")])]),t._v(" "),s("p",[s("code",[t._v("shader.js")]),t._v("文件中顶点着色器代码。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 顶点着色器代码")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" vertex "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\n@vertex\nfn main(@location(0) pos: vec3<f32>) -> @builtin(position) vec4<f32> {\n    return vec4<f32>(pos,1.0);\n}\n")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" vertex "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("通过GPU设备对象的"),s("code",[t._v(".createShaderModule()")]),t._v("方法，把顶点着色器代码转化为GPU着色器代码块对象。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 引入顶点着色器vertex代码对应字符串")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" vertex "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./shader.js'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 字符串形式的顶点着色器代码作为code属性的值")]),t._v("\ndevice"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createShaderModule")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("code")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" vertex "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"渲染管线参数vertex-module属性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#渲染管线参数vertex-module属性"}},[t._v("#")]),t._v(" 渲染管线参数"),s("code",[t._v("vertex.module")]),t._v("属性")]),t._v(" "),s("p",[t._v("把顶点着色器代码块对象"),s("code",[t._v("device.createShaderModule({ code: vertex })")]),t._v("作为渲染管线参数"),s("code",[t._v("vertex.module")]),t._v("属性的值，这样就可以配置好渲染管线上顶点着色器功能单元，要执行的顶点着色器代码。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" vertex "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./shader.js'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" pipeline "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" device"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createRenderPipeline")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("vertex")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 设置渲染管线要执行的顶点着色器代码")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("module")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" device"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createShaderModule")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("code")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" vertex "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("entryPoint")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"main"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"entrypoint属性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#entrypoint属性"}},[t._v("#")]),t._v(" "),s("code",[t._v("entryPoint")]),t._v("属性")]),t._v(" "),s("p",[t._v("实际开发中，一般需要通过"),s("code",[t._v("entryPoint")]),t._v("属性指定顶点着色器代码的入口函数，入口函数名字你可以自定义,课程中习惯性设置为"),s("code",[t._v("main")]),t._v("。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" pipeline "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" device"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createRenderPipeline")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("vertex")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("module")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" device"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createShaderModule")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("code")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" vertex "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("entryPoint")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"main"')]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//指定入口函数")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" vertex "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* wgsl */")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\n@vertex\nfn main(@location(0) pos: vec3<f32>) -> @builtin(position) vec4<f32> {\n    return vec4<f32>(pos,1.0);\n}\n")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);