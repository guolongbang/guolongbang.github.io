(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{390:function(t,s,a){"use strict";a.r(s);var n=a(7),r=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"orbitcontrols辅助设置相机参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#orbitcontrols辅助设置相机参数"}},[t._v("#")]),t._v(" OrbitControls辅助设置相机参数")]),t._v(" "),s("p",[t._v("实际开发的时候，一方面可以通过OrbitControls旋转缩放预览3D模型，另一方面也可以辅助你选择合适的相机参数。")]),t._v(" "),s("h3",{attrs:{id:"orbitcontrols知识点回顾"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#orbitcontrols知识点回顾"}},[t._v("#")]),t._v(" OrbitControls知识点回顾")]),t._v(" "),s("p",[t._v("相机控件"),s("code",[t._v("OrbitControls")]),t._v("旋转缩放平移本质上就是在改变相机"),s("code",[t._v("Camera")]),t._v("的参数。")]),t._v(" "),s("ul",[s("li",[t._v("旋转：拖动鼠标左键")]),t._v(" "),s("li",[t._v("缩放：滚动鼠标中键")]),t._v(" "),s("li",[t._v("平移：拖动鼠标右键")])]),t._v(" "),s("h3",{attrs:{id:"orbitcontrols改变相机位置-position"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#orbitcontrols改变相机位置-position"}},[t._v("#")]),t._v(" "),s("code",[t._v("OrbitControls")]),t._v("改变相机位置"),s("code",[t._v(".position")])]),t._v(" "),s("p",[t._v("通过"),s("code",[t._v("OrbitControls")]),t._v("旋转和缩放，本质上就是在改变透视投影相机"),s("code",[t._v("PerspectiveCamera")]),t._v("的位置"),s("code",[t._v(".position")]),t._v("。")]),t._v(" "),s("p",[t._v("渲染循环中不停地打印相机的位置属性，你可以通过相机控件旋转或缩放三维场景，同时通过浏览器控制台观察相机位置变化。")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("requestAnimationFrame")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("render"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 浏览器控制台查看相机位置变化")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'camera.position'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("camera"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("position"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"通过orbitcontrols设置相机位置-position"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#通过orbitcontrols设置相机位置-position"}},[t._v("#")]),t._v(" 通过"),s("code",[t._v("OrbitControls")]),t._v("设置相机位置"),s("code",[t._v(".position")])]),t._v(" "),s("p",[t._v("上节课关于相机整体预览三维场景代码设置的时候，第一步是根据渲染范围的数量级，大概设置相机的位置参数，其实第二部，相机位置具体参数，可以借助"),s("code",[t._v("OrbitControls")]),t._v("可视化旋转或缩放，然后选择一个合适的渲染效果，浏览器控制台记录下此时的相机位置。")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("camera"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("position"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//第1步：根据场景渲染范围尺寸设置")]),t._v("\ncamera"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("position"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("144")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("95")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("95")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//第2步：通过相机控件辅助设置OrbitControls")]),t._v("\n")])])]),s("h3",{attrs:{id:"orbitcontrols改变相机-lookat观察目标"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#orbitcontrols改变相机-lookat观察目标"}},[t._v("#")]),t._v(" "),s("code",[t._v("OrbitControls")]),t._v("改变相机"),s("code",[t._v(".lookAt")]),t._v("观察目标")]),t._v(" "),s("p",[t._v("通过"),s("code",[t._v("OrbitControls")]),t._v("平移，OrbitControls的"),s("code",[t._v(".target")]),t._v("属性会发生变化，"),s("code",[t._v(".target")]),t._v("属性对应的就是透视投影相机"),s("code",[t._v("PerspectiveCamera")]),t._v("的"),s("code",[t._v(".lookAt")]),t._v("观察目标`。")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("requestAnimationFrame")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("render"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 浏览器控制台查看controls.target变化，辅助设置lookAt参数")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'controls.target'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("controls"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"通过orbitcontrols设置-lookat-参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#通过orbitcontrols设置-lookat-参数"}},[t._v("#")]),t._v(" 通过"),s("code",[t._v("OrbitControls")]),t._v("设置"),s("code",[t._v(".lookAt()")]),t._v("参数")]),t._v(" "),s("p",[t._v("参照"),s("code",[t._v("OrbitControls")]),t._v("设置相机位置"),s("code",[t._v(".position")]),t._v("的过程，你可以平移三维场景，然后选择一个合适的渲染效果，记录下此时相机控件目标属性"),s("code",[t._v("controls.target")]),t._v("的值，然后作为透视投影相机"),s("code",[t._v(".lookAt()")]),t._v("的参数。")]),t._v(" "),s("p",[t._v("注意相机控件OrbitControls会影响lookAt设置，注意手动设置OrbitControls的目标参数")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// camera.lookAt(0, 0, 0);")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" x "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("y "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("z "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//通过OrbitControls辅助设置")]),t._v("\ncamera"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("lookAt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" y"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" z"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 设置相机控件轨道控制器OrbitControls")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" controls "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OrbitControls")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("camera"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" renderer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("domElement"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 相机控件.target属性在OrbitControls.js内部表示相机目标观察点，默认0,0,0")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// console.log('controls.target', controls.target);")]),t._v("\ncontrols"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" y"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" z"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//与lookAt参数保持一致")]),t._v("\ncontrols"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//update()函数内会执行camera.lookAt(controls.target)")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=r.exports}}]);