(window.webpackJsonp=window.webpackJsonp||[]).push([[115],{442:function(t,s,a){"use strict";a.r(s);var n=a(7),r=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"相机控件mapcontrols"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#相机控件mapcontrols"}},[t._v("#")]),t._v(" 相机控件"),s("code",[t._v("MapControls")])]),t._v(" "),s("p",[t._v("地图导航相机控件"),s("code",[t._v("MapControls")]),t._v("，你可实现一个类似百度地图的3D导航功能。")]),t._v(" "),s("h3",{attrs:{id:"mapcontrols使用操作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mapcontrols使用操作"}},[t._v("#")]),t._v(" MapControls使用操作")]),t._v(" "),s("p",[t._v("你可以打开课件案例源码测试下效果。")]),t._v(" "),s("ul",[s("li",[t._v("平移：鼠标左键拖动")]),t._v(" "),s("li",[t._v("旋转：鼠标右键拖动")]),t._v(" "),s("li",[t._v("缩放：鼠标中键滚动")])]),t._v(" "),s("h3",{attrs:{id:"引入相机控件mapcontrols"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#引入相机控件mapcontrols"}},[t._v("#")]),t._v(" 引入相机控件"),s("code",[t._v("MapControls")])]),t._v(" "),s("p",[t._v("引入相机控件"),s("code",[t._v("MapControls")]),t._v("类，旧版本是通过扩展库文件"),s("code",[t._v("MapControls.js")]),t._v("实现,不过新版本"),s("code",[t._v("MapControls")]),t._v("类和"),s("code",[t._v("OrbitControls")]),t._v("类一样通过\n"),s("code",[t._v("\\examples\\jsm\\controls")]),t._v("目录下的"),s("code",[t._v("OrbitControls.js")]),t._v("文件引入。")]),t._v(" "),s("div",{staticClass:"language-JavaScript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 引入相机控件`MapControls`")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" MapControls "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'three/addons/controls/OrbitControls.js'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("注意：如果你在原生.html文件中，使用"),s("code",[t._v("import { MapControls } from 'three/addons/controls/OrbitControls.js';")]),t._v("方式引入，注意通过"),s("code",[t._v('<script type="importmap">')]),t._v("配置好路径。")]),t._v(" "),s("h3",{attrs:{id:"使用mapcontrols"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用mapcontrols"}},[t._v("#")]),t._v(" 使用MapControls")]),t._v(" "),s("p",[t._v("参数1是地图导航控件要改变的相机对象，参数2是three.js渲染对应的canvas画布。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" controls "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MapControls")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("camera"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" renderer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("domElement"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"mapcontrols本质"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mapcontrols本质"}},[t._v("#")]),t._v(" MapControls本质")]),t._v(" "),s("p",[t._v("MapControls本质上就是改变相机的参数，比如相机的位置属性、相机目标观察点。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("controls"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'change'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 鼠标右键旋转时候，查看.position变化")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 鼠标左键拖动的时候，查看.position、.target的位置会变化")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'camera.position'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("camera"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("position"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'controls.target'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("controls"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"缩放、旋转或平移禁止"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#缩放、旋转或平移禁止"}},[t._v("#")]),t._v(" 缩放、旋转或平移禁止")]),t._v(" "),s("p",[t._v("参考上节课关于OrbitControls的介绍，整体思路是一样的，只是鼠标操作有差异。")]),t._v(" "),s("div",{staticClass:"language-JavaScript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("controls"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("enablePan "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//禁止平移")]),t._v("\n")])])]),s("div",{staticClass:"language-JavaScript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("controls"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("enableZoom "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//禁止缩放")]),t._v("\n")])])]),s("div",{staticClass:"language-JavaScript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("controls"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("enableRotate "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//禁止旋转")]),t._v("\n")])])]),s("h3",{attrs:{id:"透视投影相机缩放范围"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#透视投影相机缩放范围"}},[t._v("#")]),t._v(" 透视投影相机缩放范围")]),t._v(" "),s("p",[t._v("参考上节课关于OrbitControls的介绍")]),t._v(" "),s("div",{staticClass:"language-JavaScript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//相机位置与观察目标点最小值")]),t._v("\ncontrols"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("minDistance "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//相机位置与观察目标点最大值")]),t._v("\ncontrols"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("maxDistance "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"设置旋转范围"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#设置旋转范围"}},[t._v("#")]),t._v(" 设置旋转范围")]),t._v(" "),s("p",[t._v("参考上节课关于OrbitControls的介绍")]),t._v(" "),s("div",{staticClass:"language-JavaScript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 上下旋转范围")]),t._v("\ncontrols"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("minPolarAngle "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ncontrols"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("maxPolarAngle "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Math"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PI")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("div",{staticClass:"language-JavaScript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 左右旋转范围")]),t._v("\ncontrols"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("minAzimuthAngle "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Math"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PI")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ncontrols"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("maxAzimuthAngle "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Math"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PI")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=r.exports}}]);