(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{389:function(t,a,s){"use strict";s.r(a);var n=s(7),e=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"加载-gltf文件-模型加载全流程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#加载-gltf文件-模型加载全流程"}},[t._v("#")]),t._v(" 加载.gltf文件(模型加载全流程)")]),t._v(" "),a("p",[t._v("本节课，以gltf格式为例，给大家讲解加载外部三维模型的整个过程。")]),t._v(" "),a("p",[t._v("场景、光源、渲染器、相机控件等前面说过基础代码，本节课不专门讲解，主要是把下面三部，给大家全流程演示一遍。")]),t._v(" "),a("ol",[a("li",[t._v("gltf模型加载器"),a("code",[t._v("GLTFLoader.js")])]),t._v(" "),a("li",[t._v("相机参数根据需要设置")]),t._v(" "),a("li",[t._v("加载gltf的时候，webgl渲染器编码方式设置")])]),t._v(" "),a("h3",{attrs:{id:"_1-1-引入gltfloader-js"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-引入gltfloader-js"}},[t._v("#")]),t._v(" 1.1.引入"),a("code",[t._v("GLTFLoader.js")])]),t._v(" "),a("p",[t._v("你在three.js官方文件的**examples/jsm/"),a("strong",[t._v("子文件")]),t._v("loaders/**目录下，可以找到一个文件"),a("code",[t._v("GLTFLoader.js")]),t._v("，这个文件就是three.js的一个扩展库，专门用来加载gltf格式模型加载器。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 引入gltf模型加载库GLTFLoader.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" GLTFLoader "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'three/addons/loaders/GLTFLoader.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"_1-2-gltf加载器new-gltfloader"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-gltf加载器new-gltfloader"}},[t._v("#")]),t._v(" 1.2.gltf加载器"),a("code",[t._v("new GLTFLoader()")])]),t._v(" "),a("p",[t._v("执行"),a("code",[t._v("new GLTFLoader()")]),t._v("就可以实例化一个gltf的加载器对象。")]),t._v(" "),a("div",{staticClass:"language-JavaScript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 创建GLTF加载器对象")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" loader "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GLTFLoader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"_1-3-gltf加载器方法-load"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-gltf加载器方法-load"}},[t._v("#")]),t._v(" 1.3.gltf加载器方法"),a("code",[t._v(".load()")])]),t._v(" "),a("p",[t._v("通过gltf加载器方法"),a("code",[t._v(".load()")]),t._v("就可以加载外部的gltf模型。")]),t._v(" "),a("p",[t._v("执行方法"),a("code",[t._v(".load()")]),t._v("会返回一个gltf对象，作为参数2函数的参数，改gltf对象可以包含模型、动画等信息，本节课你只需要先了解gltf的场景属性"),a("code",[t._v("gltf.scene")]),t._v(",该属性包含的是模型信息，比如几何体"),a("strong",[t._v("BufferGometry")]),t._v("、材质"),a("strong",[t._v("Material")]),t._v("、网格模型"),a("strong",[t._v("Mesh")]),t._v("。")]),t._v(" "),a("div",{staticClass:"language-JavaScript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("loader"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("load")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'gltf模型.gltf'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("gltf")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'控制台查看加载gltf文件返回的对象结构'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("gltf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'gltf对象场景属性'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("gltf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scene"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 返回的场景对象gltf.scene插入到threejs场景中")]),t._v("\n  scene"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" gltf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scene "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h3",{attrs:{id:"相机选择-正投影orthographiccamera和透视投影perspectivecamera"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#相机选择-正投影orthographiccamera和透视投影perspectivecamera"}},[t._v("#")]),t._v(" 相机选择("),a("strong",[t._v("正投影")]),a("code",[t._v("OrthographicCamera")]),t._v("和"),a("strong",[t._v("透视投影")]),a("code",[t._v("PerspectiveCamera")]),t._v(")")]),t._v(" "),a("p",[t._v("如果你想预览一个三维场景，一般有"),a("strong",[t._v("正投影相机")]),a("code",[t._v("OrthographicCamera")]),t._v("和"),a("strong",[t._v("透视投影相机")]),a("code",[t._v("PerspectiveCamera")]),t._v("可供选择。不过大部分3D项目，比如一般都是使用"),a("strong",[t._v("透视投影相机")]),a("code",[t._v("PerspectiveCamera")]),t._v("，比如游戏、物联网等项目都会选择"),a("strong",[t._v("透视投影相机")]),a("code",[t._v("PerspectiveCamera")]),t._v("。")]),t._v(" "),a("p",[t._v("如果你希望渲染的结果符合人眼的"),a("strong",[t._v("远小近大")]),t._v("的规律，毫无疑问要选择"),a("strong",[t._v("透视")]),t._v("投影相机，如果不需要模拟人眼远小近大的投影规律，可以选择"),a("strong",[t._v("正投影")]),t._v("相机。")]),t._v(" "),a("h3",{attrs:{id:"尺寸概念"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#尺寸概念"}},[t._v("#")]),t._v(" 尺寸概念")]),t._v(" "),a("p",[t._v("项目开发的时候，程序员对一个模型或者说一个三维场景要有一个尺寸的概念，不用具体值，要有一个大概印象。")]),t._v(" "),a("p",[t._v("一般通过三维建模软件可以轻松测试测量模型尺寸，比如作为程序员你可以用三维建模软件"),a("strong",[t._v("blender")]),t._v("打开gltf模型，测量尺寸。")]),t._v(" "),a("h3",{attrs:{id:"单位问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#单位问题"}},[t._v("#")]),t._v(" 单位问题")]),t._v(" "),a("p",[t._v("three.js的世界并没有任何单位，只有数字大小的运算。")]),t._v(" "),a("p",[t._v("obj、gltf格式的模型信息只有尺寸，并不含单位信息。")]),t._v(" "),a("p",[t._v("不过实际项目开发的时候，一般会定义一个单位，一方面甲方、前端、美术之间更好协调，甚至你自己写代码也要有一个尺寸标准。比如一个园区、工厂，可以m为单位建模，比如建筑、人、相机都用m为尺度去衡量，如果单位不统一，就需要你写代码,通过"),a("code",[t._v(".scale")]),t._v("属性去缩放。")]),t._v(" "),a("h3",{attrs:{id:"设置合适的相机参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置合适的相机参数"}},[t._v("#")]),t._v(" 设置合适的相机参数")]),t._v(" "),a("p",[t._v("通过gltf加载完成，模型后，你还需要根据自身需要，设置合适的相机参数，就好比你拍照，你想拍摄一个石头，肯定要把相机对着石头，如果希望石头在照片上占比大，就要离石头近一些。")]),t._v(" "),a("p",[t._v("相机位置怎么设置，你就类比你的眼睛，如果你想模拟人在3D场景中漫游，那么很简单，你把相机放在地面上，距离地面高度和人身高接近即可。")]),t._v(" "),a("p",[t._v("如果你想看到工厂的全貌，你可以理解为你坐着无人机向下俯瞰，简单说，相比人漫游工厂，整体预览工厂相机距离工厂距离更远一些，否则你也看不到全貌，当然过于远了，你就看不清工厂了。")]),t._v(" "),a("p",[t._v("以课程工厂为例，先设定一个小目标，我们希望工厂能够居中显示在canvas画布上，并且保证可以整体预览。")]),t._v(" "),a("p",[t._v("下面以"),a("strong",[t._v("透视投影相机")]),a("code",[t._v("PerspectiveCamera")]),t._v("为例说明。")]),t._v(" "),a("h3",{attrs:{id:"_2-1-相机位置-position"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-相机位置-position"}},[t._v("#")]),t._v(" 2.1.相机位置"),a("code",[t._v(".position")])]),t._v(" "),a("p",[t._v("工厂尺寸范围大概200米数量级，那么如果想整体预览观察工厂所有模型，那很简单，第一步，把"),a("code",[t._v("camera.position")]),t._v("的xyz值统统设置为几百即可，比如"),a("code",[t._v("(200, 200, 200)")]),t._v("。")]),t._v(" "),a("p",[t._v("具体xyz值，你可以通过"),a("strong",[t._v("OrbitControls")]),t._v("可视化操作调整，然后浏览器控制台记录相机参数即可。")]),t._v(" "),a("div",{staticClass:"language-JavaScript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("camera"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("position"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"_2-2-某位置在canvas画布居中"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-某位置在canvas画布居中"}},[t._v("#")]),t._v(" 2.2 某位置在canvas画布居中")]),t._v(" "),a("p",[t._v("你需要工厂那个位置在canavs画布上居中，直接把"),a("code",[t._v("camera.lookAt()")]),t._v("指向哪个坐标。")]),t._v(" "),a("p",[t._v("如果美术建模，把工厂整体居中，也就是说模型的几何中心，大概位于世界坐标原点。你设置"),a("code",[t._v("camera.lookAt(0,0,0)")]),t._v(",相机视线指向坐标原点。")]),t._v(" "),a("div",{staticClass:"language-JavaScript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("camera"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("lookAt")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("注意相机控件OrbitControls会影响lookAt设置，注意手动设置OrbitControls的目标参数")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("\ncamera"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("lookAt")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 设置相机控件轨道控制器OrbitControls")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" controls "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OrbitControls")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("camera"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" renderer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("domElement"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 相机控件.target属性在OrbitControls.js内部表示相机目标观察点，默认0,0,0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// console.log('controls.target', controls.target);")]),t._v("\ncontrols"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("target"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ncontrols"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//update()函数内会执行camera.lookAt(controls.targe)")]),t._v("\n")])])]),a("h3",{attrs:{id:"_2-3-远裁截面far参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-远裁截面far参数"}},[t._v("#")]),t._v(" 2.3.远裁截面"),a("code",[t._v("far")]),t._v("参数")]),t._v(" "),a("p",[t._v("近裁截面near和远裁截面far，要能包含你想渲染的场景，否则超出视锥体模型会被剪裁掉，简单说near足够小，far足够大，主要是far。")]),t._v(" "),a("p",[a("code",[t._v("PerspectiveCamera(fov, aspect, near, far)")])]),t._v(" "),a("p",[t._v("测量工厂尺寸大概几百的数量级，这里不用测具体尺寸，有个大概数量级即可，然后far设置为3000足够了。")]),t._v(" "),a("div",{staticClass:"language-JavaScript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" camera "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("THREE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("PerspectiveCamera")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" width "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" height"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"_3-纹理贴图颜色偏差解决"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-纹理贴图颜色偏差解决"}},[t._v("#")]),t._v(" 3.纹理贴图颜色偏差解决")]),t._v(" "),a("p",[t._v("three.js加载"),a("strong",[t._v("gltf")]),t._v("模型的时候，可能会遇到three.js渲染结果颜色偏差，对于这种情况，你只需要修改WebGL渲染器默认的编码方式"),a("code",[t._v(".outputEncoding")]),t._v("即可")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//解决加载gltf格式模型纹理贴图和原图不一样问题")]),t._v("\nrenderer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("outputEncoding "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("THREE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sRGBEncoding"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("注意！！！！！！！最新版本属性名字有改变。渲染器属性名"),a("code",[t._v(".outputEncoding")]),t._v("已经变更为"),a("code",[t._v(".outputColorSpace")]),t._v("。")]),t._v(" "),a("p",[t._v("查WebGL渲染器文档，你可以看到"),a("code",[t._v(".outputColorSpace")]),t._v("的默认值就是SRGB颜色空间"),a("code",[t._v("THREE.SRGBColorSpace")]),t._v("，意味着新版本代码中，加载gltf，没有特殊需要，不设置"),a("code",[t._v(".outputColorSpace")]),t._v("也不会引起色差。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//新版本，加载gltf，不需要执行下面代码解决颜色偏差")]),t._v("\nrenderer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("outputColorSpace "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("THREE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("SRGBColorSpace"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//设置为SRGB颜色空间")]),t._v("\n")])])])])}),[],!1,null,null,null);a.default=e.exports}}]);