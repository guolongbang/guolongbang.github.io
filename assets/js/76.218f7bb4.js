(window.webpackJsonp=window.webpackJsonp||[]).push([[76],{404:function(t,s,a){"use strict";a.r(s);var n=a(7),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"三维建模软件导出pbr材质属性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三维建模软件导出pbr材质属性"}},[t._v("#")]),t._v(" 三维建模软件导出PBR材质属性")]),t._v(" "),s("p",[t._v("实际开发的时候PBR材质的属性，很多时候是可以在三维建模软件中设置的，然后通过gltf导出即可，这样就不用在threejs代码设置。")]),t._v(" "),s("p",[t._v("通常美术对三维场景渲染的了解也比大部分前端程序员多的多，只要美术在三维建模软件设置好并导出包含pbr材质属性的gltf即可。")]),t._v(" "),s("h3",{attrs:{id:"threejs与建模软件对接的问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#threejs与建模软件对接的问题"}},[t._v("#")]),t._v(" threejs与建模软件对接的问题")]),t._v(" "),s("ol",[s("li",[t._v("gltf能否存储3D建模软件的某个材质属性：有些三维软件特有的材质属性，不一定能通过gltf导出，也谈不上threejs解析")]),t._v(" "),s("li",[t._v("三维建模能否导出PBR材质：能导出的话，能导出哪些属性，不能导出哪些属性")])]),t._v(" "),s("p",[t._v("如果你的三维建模不能导出pbr材质，或者部分pbr材质属性无法导出，那你通常需要用代码方式添加材质，这样就麻烦些。")]),t._v(" "),s("h3",{attrs:{id:"blender导出pbr材质演示"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#blender导出pbr材质演示"}},[t._v("#")]),t._v(" Blender导出PBR材质演示")]),t._v(" "),s("p",[t._v("首先Blender最新版导出gltf模型时候，是可以把PBR材质的很多属性导出的，比如金属度"),s("code",[t._v("metalness")]),t._v("、粗糙度"),s("code",[t._v("roughness")]),t._v("、清漆"),s("code",[t._v(".clearcoat")]),t._v("、透光率(透射度)"),s("code",[t._v(".transmission")]),t._v("等等。课件源码中提供了blender导出的gltf模型你可以浏览器控制台打印测试，这些PBR材质属性能否解析渲染。")]),t._v(" "),s("h3",{attrs:{id:"bledner中设置pbr材质"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#bledner中设置pbr材质"}},[t._v("#")]),t._v(" Bledner中设置PBR材质")]),t._v(" "),s("p",[t._v("你可以在Bledner中设置车外壳、车玻璃的材质属性")]),t._v(" "),s("ol",[s("li",[t._v("车外壳：清漆、清漆粗糙度")]),t._v(" "),s("li",[t._v("车玻璃：透光率(透射度)")])]),t._v(" "),s("h3",{attrs:{id:"threejs解析gltf材质规则"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#threejs解析gltf材质规则"}},[t._v("#")]),t._v(" threejs解析gltf材质规则")]),t._v(" "),s("p",[t._v("大家都知道，"),s("code",[t._v("MeshPhysicalMaterial")]),t._v("是"),s("code",[t._v("MeshStandardMaterial")]),t._v("的子类，具有更多的PBR材质属性和功能。")]),t._v(" "),s("p",[t._v("所以，threejs解析gltf模型，会用两种材质PBR材质去解析，一个是标准网格材质"),s("code",[t._v("MeshStandardMaterial")]),t._v("，一个是物理网格材质"),s("code",[t._v("MeshPhysicalMaterial")]),t._v("，如果能用"),s("code",[t._v("MeshStandardMaterial")]),t._v("表示就用，不能就换"),s("code",[t._v("MeshPhysicalMaterial")]),t._v("。")]),t._v(" "),s("p",[t._v("具体说就是，threejs解析gltf模型材质的时候，一般默认使用标准网格材质"),s("code",[t._v("MeshStandardMaterial")]),t._v("，如果gltf有的材质具有"),s("code",[t._v(".clearcoat")]),t._v("、"),s("code",[t._v(".transmission")]),t._v("等属性，标准网格材质"),s("code",[t._v("MeshStandardMaterial")]),t._v("无法表达的时候，会用物理网格材质"),s("code",[t._v("MeshPhysicalMaterial")]),t._v("来解析gltf材质。")]),t._v(" "),s("p",[t._v("查看threejs解析的PBR材质")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("gltf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scene"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("traverse")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("obj")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("isMesh"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'obj.material'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("obj"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("material"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'外壳'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("mesh1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("material"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'玻璃'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("mesh2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("material"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"设置环境贴图"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#设置环境贴图"}},[t._v("#")]),t._v(" 设置环境贴图")]),t._v(" "),s("p",[t._v("这时候清漆、清漆粗糙度、透光率(透射度)等属性Bledner都已经设置好了，threejs可以自动解析渲染,不用在代码中麻烦设置了，只要配上环境贴图即可。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" mesh1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" gltf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scene"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getObjectByName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'外壳01'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmesh1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("material"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("envMap "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" textureCube"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//环境贴图")]),t._v("\nmesh1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("material"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("envMapIntensity "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("////环境贴图对Mesh表面影响程度")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" mesh2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" gltf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scene"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getObjectByName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'玻璃01'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmesh2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("material"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("envMap "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" textureCube"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//环境贴图")]),t._v("\nmesh2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("material"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("envMapIntensity "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("////环境贴图对Mesh表面影响程度")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);