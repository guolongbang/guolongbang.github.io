(window.webpackJsonp=window.webpackJsonp||[]).push([[241],{567:function(s,a,e){"use strict";e.r(a);var t=e(7),r=Object(t.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"threejs各个材质的shader代码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#threejs各个材质的shader代码"}},[s._v("#")]),s._v(" threejs各个材质的shader代码")]),s._v(" "),a("p",[s._v("本节课给大家说说threejs各种网格材质、点材质、精灵材质，对应的着色器(shader)代码。")]),s._v(" "),a("h3",{attrs:{id:"知识回顾-shadermaterial自定义shader代码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#知识回顾-shadermaterial自定义shader代码"}},[s._v("#")]),s._v(" 知识回顾："),a("code",[s._v("ShaderMaterial")]),s._v("自定义shader代码")]),s._v(" "),a("p",[s._v("回顾下前面"),a("code",[s._v("ShaderMaterial")]),s._v("讲解，你会发现咱们用"),a("code",[s._v("ShaderMaterial")]),s._v("自定义着色器GLSL ES代码，模拟过基础网格材质"),a("code",[s._v("MeshBasicMaterial")]),s._v("、点材质"),a("code",[s._v("PointsMaterial")]),s._v("的渲染效果。")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"http://www.webgl3d.cn/pages/eb2fda/",target:"_blank",rel:"noopener noreferrer"}},[s._v("1.3. ShaderMaterial着色器材质"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"http://www.webgl3d.cn/pages/964545/",target:"_blank",rel:"noopener noreferrer"}},[s._v("1.11.shader模仿点材质效果"),a("OutboundLink")],1)])]),s._v(" "),a("p",[s._v("其实threejs中，接触的常用的"),a("strong",[s._v("网格材质")]),s._v("、"),a("strong",[s._v("点材质")]),s._v("本质上都是shader(着色器)代码，都有threejs提前定义好的着色器 GLSL ES代码。")]),s._v(" "),a("h3",{attrs:{id:"不同材质对应的shader文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#不同材质对应的shader文件"}},[s._v("#")]),s._v(" 不同材质对应的shader文件")]),s._v(" "),a("p",[s._v("你可以下载threejs官方文件包，或者直接查看课件源码中我下载的threejs文件包。")]),s._v(" "),a("p",[s._v("目录"),a("code",[s._v("\\src\\renderers\\shaders\\ShaderLib")]),s._v("里面有不同threejs材质对应的着色器shader文件。")]),s._v(" "),a("p",[s._v("你通过名字，就可以判断，那个材质，对应那个shader文件\n"),a("img",{attrs:{src:"/imgthreejs/%E6%9D%90%E8%B4%A8%E5%AF%B9%E5%BA%94sahder%E6%96%87%E4%BB%B6.jpg",alt:""}})]),s._v(" "),a("h3",{attrs:{id:"include语法简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#include语法简介"}},[s._v("#")]),s._v(" "),a("code",[s._v("#include")]),s._v("语法简介")]),s._v(" "),a("p",[s._v("着色器语言GLSL ES，可以通过"),a("code",[s._v("#include")]),s._v("引入其它的着色器代码文件，你可以类比js的 import语法去对比理解(虽然不同，但是都是为了引入别的文件)。")]),s._v(" "),a("h3",{attrs:{id:"renderers-shaders-shaderchunk目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#renderers-shaders-shaderchunk目录"}},[s._v("#")]),s._v(" "),a("code",[s._v("renderers\\shaders\\ShaderChunk")]),s._v("目录")]),s._v(" "),a("p",[s._v("查看threejs官方文件包"),a("code",[s._v("src\\renderers\\shaders\\ShaderChunk")]),s._v("目录，你可以发现"),a("strong",[s._v("ShaderChunk")]),s._v("文件夹里面有很多着色器GLSL ES的功能代码模块。")]),s._v(" "),a("p",[s._v("比如文件"),a("strong",[s._v("default_vertex.glsl.js")]),s._v("、"),a("strong",[s._v("default_fragment.glsl.js")]),s._v("、"),a("strong",[s._v("color_pars_vertex.glsl.js")])]),s._v(" "),a("p",[a("strong",[s._v("ShaderChunk")]),s._v("里面的shader代码文件，会被其它的文件引用，比如"),a("strong",[s._v("shaders\\ShaderLib")]),s._v("目录下面的shader文件，就会引用"),a("strong",[s._v("ShaderChunk")]),s._v("里面的文件代码。")]),s._v(" "),a("p",[s._v("比如"),a("strong",[s._v("ShaderChunk")]),s._v("里面的"),a("code",[s._v("color_pars_vertex.glsl.js")]),s._v("文件，会被"),a("strong",[s._v("ShaderLib")]),s._v("里面多个文件引用，你可以检索关键词"),a("code",[s._v("color_pars_vertex")]),s._v("去验证，你会发现多个文件含有代码"),a("code",[s._v("#include <color_pars_vertex>")]),s._v("。")]),s._v(" "),a("p",[s._v("比如网格基础材质MeshBasicMaterial对应shader文件meshbasic.glsl.js，就引入了文件"),a("code",[s._v("color_pars_vertex.glsl.js")])]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),s._v("\n#include "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("color_pars_vertex"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),s._v("\n")])])]),a("h3",{attrs:{id:"onbeforecompile查看shader代码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#onbeforecompile查看shader代码"}},[s._v("#")]),s._v(" "),a("code",[s._v(".onBeforeCompile")]),s._v("查看shader代码")]),s._v(" "),a("p",[s._v("threejs各个材质材质会从父类"),a("code",[s._v("Material")]),s._v("继承"),a("code",[s._v(".onBeforeCompile")]),s._v("方法。")]),s._v(" "),a("p",[s._v("你可以通过"),a("code",[s._v(".onBeforeCompile")]),s._v("函数的参数"),a("code",[s._v("shade")]),s._v("r获取材质的着色器代码，其实你对照下，就会发现这些代码的来自"),a("code",[s._v("\\src\\renderers\\shaders\\ShaderLib")]),s._v("目录下shader文件。")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" material "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("THREE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("MeshLambertMaterial")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nmaterial"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("onBeforeCompile")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("shader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'shader'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" shader"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'顶点着色器'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" shader"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("vertexShader"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'片元着色器'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" shader"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("fragmentShader"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])])])}),[],!1,null,null,null);a.default=r.exports}}]);