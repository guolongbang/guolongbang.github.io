(window.webpackJsonp=window.webpackJsonp||[]).push([[127],{454:function(s,t,a){"use strict";a.r(t);var e=a(7),n=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"后处理-高亮发光描边outlinepass"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#后处理-高亮发光描边outlinepass"}},[s._v("#")]),s._v(" 后处理(高亮发光描边OutlinePass)")]),s._v(" "),t("p",[s._v("查看threejs文件包目录"),t("code",[s._v("examples/jsm/postprocessing/")]),s._v("，你可以看到Three.js提供了一个扩展库"),t("code",[s._v("EffectComposer.js")]),s._v(",通过EffectComposer可以实现一些后期处理效果。")]),s._v(" "),t("p",[s._v("所谓threejs后期处理，就像ps一样，对threejs的渲染结果进行后期处理，比如添加发光效果。")]),s._v(" "),t("h3",{attrs:{id:"不同功能后处理通道"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#不同功能后处理通道"}},[s._v("#")]),s._v(" 不同功能后处理通道")]),s._v(" "),t("p",[s._v("查看threejs文件包目录"),t("code",[s._v("examples/jsm/postprocessing/")]),s._v("，你可以看到threejs提供了很多后处理通道，想实现什么样的后期处理效果，需要调用threejs对应的后处理通道扩展库。")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("OutlinePass.js")]),s._v("：高亮发光描边")]),s._v(" "),t("li",[t("code",[s._v("UnrealBloomPass.js")]),s._v("：Bloom发光")]),s._v(" "),t("li",[t("code",[s._v("GlitchPass.js")]),s._v("：画面抖动效果")])]),s._v(" "),t("p",[s._v("比如"),t("code",[s._v("OutlinePass.js")]),s._v("扩展库提供的类"),t("code",[s._v("OutlinePass")]),s._v("就可以给一个模型添加一个高亮发光描边，下面就给大家演示下如何实现。")]),s._v(" "),t("p",[t("img",{attrs:{src:"/imgthreejs/%E9%AB%98%E4%BA%AE%E5%8F%91%E5%85%89%E6%8F%8F%E8%BE%B9.jpg",alt:""}})]),s._v(" "),t("h3",{attrs:{id:"引入effectcomposer-js"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#引入effectcomposer-js"}},[s._v("#")]),s._v(" 引入"),t("code",[s._v("EffectComposer.js")])]),s._v(" "),t("p",[s._v("你可以在threejs文件包目录"),t("code",[s._v("examples/jsm/postprocessing/")]),s._v("找到扩展库EffectComposer.js。")]),s._v(" "),t("p",[s._v("代码中引入后处理扩展库EffectComposer.js")]),s._v(" "),t("div",{staticClass:"language-javascript extra-class"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" EffectComposer "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'three/addons/postprocessing/EffectComposer.js'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("p",[s._v("大家都知道three.js WebGL渲染器执行渲染方法"),t("code",[s._v(".render()")]),s._v("会得到一张图像，如果你需要对一个webgl渲染器的渲染结果进行后期处理，就把它作为"),t("code",[s._v("EffectComposer")]),s._v("的参数。")]),s._v(" "),t("div",{staticClass:"language-javascript extra-class"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 创建后处理对象EffectComposer，WebGL渲染器作为参数")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" composer "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("EffectComposer")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("renderer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("h3",{attrs:{id:"渲染器通道renderpass"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#渲染器通道renderpass"}},[s._v("#")]),s._v(" 渲染器通道"),t("code",[s._v("RenderPass")])]),s._v(" "),t("p",[s._v("RenderPass.js扩展库目录："),t("code",[s._v("examples/jsm/postprocessing/")])]),s._v(" "),t("div",{staticClass:"language-javascript extra-class"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 引入渲染器通道RenderPass")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" RenderPass "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'three/addons/postprocessing/RenderPass.js'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("p",[s._v("通过"),t("code",[s._v("EffectComposer(renderer)")]),s._v("指定了需要后处理的渲染器"),t("code",[s._v("WebGLRenderer")]),s._v("，渲染器通道"),t("code",[s._v("RenderPass")]),s._v("的作用是指定后处理对应的相机"),t("code",[s._v("camera")]),s._v("和场景"),t("code",[s._v("scene")]),s._v("。")]),s._v(" "),t("div",{staticClass:"language-javascript extra-class"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 创建一个渲染器通道，场景和相机作为参数")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" renderPass "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RenderPass")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("scene"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" camera"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("p",[s._v("给"),t("code",[s._v("EffectComposer")]),s._v("添加一个渲染器通道"),t("code",[s._v("RenderPass")]),s._v("。")]),s._v(" "),t("div",{staticClass:"language-javascript extra-class"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 设置renderPass通道")]),s._v("\ncomposer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("addPass")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("renderPass"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("h3",{attrs:{id:"outlinepass通道"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#outlinepass通道"}},[s._v("#")]),s._v(" "),t("code",[s._v("OutlinePass")]),s._v("通道")]),s._v(" "),t("p",[t("code",[s._v("OutlinePass")]),s._v("可以给指定的某个模型对象添加一个高亮发光描边效果。")]),s._v(" "),t("p",[s._v("OutlinePass.js扩展库目录："),t("code",[s._v("examples/jsm/postprocessing/")])]),s._v(" "),t("div",{staticClass:"language-javascript extra-class"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 引入OutlinePass通道")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" OutlinePass "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'three/addons/postprocessing/OutlinePass.js'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("p",[s._v("创建OutlinePass通道")]),s._v(" "),t("div",{staticClass:"language-javascript extra-class"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// OutlinePass第一个参数v2的尺寸和canvas画布保持一致")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" v2 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("THREE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Vector2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("window"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("innerWidth"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" window"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("innerHeight"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// const v2 = new THREE.Vector2(800, 600);")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" outlinePass "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("OutlinePass")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("v2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" scene"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" camera"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("h3",{attrs:{id:"outlinepass属性-selectedobjects"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#outlinepass属性-selectedobjects"}},[s._v("#")]),s._v(" OutlinePass属性"),t("code",[s._v(".selectedObjects")])]),s._v(" "),t("p",[s._v("three.js场景中有多个模型的话，你希望给哪个模型对象设置发光描边效果，就可以通过OutlinePass的选择对象属性"),t("code",[s._v(".selectedObjects")]),s._v("设置。")]),s._v(" "),t("div",{staticClass:"language-javascript extra-class"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 一个模型对象")]),s._v("\noutlinePass"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("selectedObjects "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mesh"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 多个模型对象")]),s._v("\noutlinePass"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("selectedObjects "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mesh1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("mesh2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("group"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("h3",{attrs:{id:"设置outlinepass通道"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#设置outlinepass通道"}},[s._v("#")]),s._v(" 设置OutlinePass通道")]),s._v(" "),t("p",[s._v("最后把创建好的OutlinePass通道添加到后处理composer中。")]),s._v(" "),t("div",{staticClass:"language-javascript extra-class"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 设置OutlinePass通道")]),s._v("\ncomposer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("addPass")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("outlinePass"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("h3",{attrs:{id:"渲染循环执行effectcomposer-render"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#渲染循环执行effectcomposer-render"}},[s._v("#")]),s._v(" 渲染循环执行"),t("code",[s._v("EffectComposer.render()")])]),s._v(" "),t("p",[s._v("渲染循环中后处理EffectComposer执行"),t("code",[s._v(".render()")]),s._v("，会调用webgl渲染器执行"),t("code",[s._v(".render()")]),s._v("，也就是说"),t("code",[s._v("renderer.render(scene, camera)")]),s._v("不用再执行。")]),s._v(" "),t("div",{staticClass:"language-javascript extra-class"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 渲染循环")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("render")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    composer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("render")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// renderer.render(scene, camera);")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("requestAnimationFrame")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("render"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("render")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("h3",{attrs:{id:"修改outlinepass默认描边效果"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改outlinepass默认描边效果"}},[s._v("#")]),s._v(" 修改OutlinePass默认描边效果")]),s._v(" "),t("p",[s._v("参考下节课具体讲解")])])}),[],!1,null,null,null);t.default=n.exports}}]);